<!DOCTYPE html>
<html>
<head>
	<title>Lab5_4A</title>
</head>
<body>
	<div>
		Username :
	</div>
	<div>
		<input type="text" name="text" id="mytext" style="border: 2px solid black; width: 200px; margin-bottom: 4px">
	</div>

	<div>
		Password : </div>
	<div>
		<input type="password" name="text" id="Password" style="border: 2px solid black; width:200px; margin-bottom: 4px">
	</div>

	<div>
		RepeatPassword :</div>
	<div>
		<input type="password" name="text" id="RPassword" style="border: 2px solid black; width:200px; margin-bottom: 4px">
	</div>

	<div>
		MobileNo : </div>
	<div>
		<input type="text" name="text" id="contact" style="border: 2px solid black; width: 200px; margin-bottom: 4px">
	</div>

	<div>
		Date of Birth : </div>
	<div>
		<input type="date" name="DOB" id="DOB" style="border: 2px solid black; width: 200px; margin-bottom: 4px">
	</div>

	<div>
		EnrollmentNo :</div>
	<div>
		<input type="text" name="text" id="digit" style="border: 2px solid black; width: 200px; margin-bottom: 4px">
	</div>

	<div>
		Email :
		<div>
			<input type="text" name="text" id="email" style="border: 2px solid black; width: 200px; margin-bottom: 4px">
		</div>
	</div>

	<button onclick="check()">Submit</button>
	<div><p id="Age"></p></div>

	<script type="text/javascript">
		let a = document.getElementById('mytext');
		let b = document.getElementById('Password');
		let c = document.getElementById('contact');
		let rb = document.getElementById('RPassword');
		let e = document.getElementById('digit');
		let f = document.getElementById('email');

		function check() {
			validation();
			calAge();
		}

		function validation() {
			let usernamePattern = /^[a-zA-Z0-9]{8,}$/; // for username
			let passwordPattern = /^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[!@#$%^&*]).{8,12}$/; // for password
			let phonePattern = /^[0-9]{10}$/; // for phone number
			let enrollmentPattern = /^2301[0-9]{7}$/; // for enrollment number
			let emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/; // for email

			if (!usernamePattern.test(a.value)) {
				alert("Username is not valid (username must be of minimum 8 characters)");
			}

			if (!passwordPattern.test(b.value)) {
				alert("Password must be between 8 to 12 characters and contain at least one letter, one number, and one special character");
			}

			if (b.value !== rb.value) {
				alert("Passwords do not match");
			}

			if (!phonePattern.test(c.value)) {
				alert("Mobile number is not valid");
			}

			if (!enrollmentPattern.test(e.value)) {
				alert("Enrollment number is not valid");
			}

			if (!emailPattern.test(f.value)) {
				alert("Email is not valid");
			}
		}

		function calAge() {
			let DOB = new Date(document.getElementById('DOB').value);

			let today = new Date();
			let Age = today.getFullYear() - DOB.getFullYear();
			let monthDiff = today.getMonth() - DOB.getMonth();

			if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < DOB.getDate())) {
				Age--;
			}
			document.getElementById("Age").innerHTML = Age;
		}
	</script>

</body>
</html>
